# PPLIS_Gorbunova

Курсовая работа по предмету ППЛИС

## Техническое задание.

> Разработать в САПР QUARTUS II схему двоично-десятичного "пилообразного" счетчика, считающего импульсы в пределах заданного интервала между числами **N1** и **N2** (**N1 < N2**). Сначала выполняется прямой счет от **N1** до **N2**, а затем обратный от **N2** до **N1**. Параметры представлены в двоично-десятичном виде. Режимы работы:
>
>   1. Ввод числа N1 с помощью шифтеров в двоичной форме (8 бит) с выводом числа на индикаторе;
>   2. Ввод числа N2 с помощью шифтеров в двоичной форме (8 бит) с выводом числа на индикаторе;  
>   3. Ожидание старта счета.

## Схема топового модуля `sawtooth_counter_top.v`

![Блок-схема топового модуля](/doc/schematic.jpg)

## Карта сигналов схемы

| Название сигнала | Направление | Разрядность | Описание |
| ---------------- | ----------- | ----------- | -------- |
| clk_i            |    [in]     | 1           | Тактовый синхросигнал ПЛИС частотой 50 МГц |
| rst_i            |    [in]     | 1           | Сигнал асинхронного сброса по срезу |
| v_i              |    [in]     | 1           | Кнопка подтверждения установки чисел **N1** и **N2** |
| ST_i             |    [in]     | 1           | Кнопка разрешения работы "пилообразного" счетчика|
| din_i            |    [in]     | 8           | Входная шина шифтеров, устанавливающих значения **N1** и **N2** |
| Q_o              |    [out]    | 18          | Выходные сигналы на светодиоды для индикации "пилообразного счетчика|
| sseg0            |    [out]    | 7           | Выходная шина на семисегментный индикатор, обозначающий единицы|
| sseg1            |    [out]    | 7           | Выходная шина на семисегментный индикатор, обозначающий десятки|
| sseg2            |    [out]   | 7            | Выходная шина на семисегментный индикатор, обозначающий сотни |
| sseg3            |    [out]   | 7            | Выходная шина на семисегментный индикатор, обозначающий текущее состояние конечного автомата |

## Описание конечного автомата в модуле `couter_fsm.v`

![Граф конечного автомата](/doc/fsm.jpg)

| Название состояния | Куда переходит | Описание состояния |
| ------------------ | -------------- | -------------- |
| IDLE               | (v_i) -> N1_SELECT | Исходное состояние конечного автомата после асинхронного сброса схемы |
| N1_SELECT          | (v_i) -> N2_SELECT | Установка значения **N1** |
| N2_SELECT          | (v_i) -> CALC_WAIT | Установка значения **N2** |
| CALC_WAIT          | (v_i) -> N1_SELECT | Перезапись значений **N1** и **N2** |
|                    | (ST_i) -> CALC      | Ожидание разрешения на счет |
| CALC               | (v_i) -> N1_SELECT | Сброс текущего счета, переустановка значений **N1** и **N2** |
|                    | (ST_i) -> CALC_WAIT | Остановка счета, ожидание разрешения на счет |
